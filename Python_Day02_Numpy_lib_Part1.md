title: Python å­¦ä¹ æ—¥è®° -- ç§‘å­¦è®¡ç®—åŸºç¡€NumPy - Part1
author: Xueyong Lu
date: 2022-03-20
css: ...\css\my_md_style.css

<div align = "center">
    <h1>Pythonå­¦ä¹ æ—¥è®°</h1>
</div>
<div align = "right">
    <h2><small>ç§‘å­¦è®¡ç®—åŸºç¡€NumPy - Part1</small></h2>
</div>

ğŸ“˜<<[Day 01](.\Python_Day01_Reg_Ex.md) | [Day 03](.\Python_Day03_Numpy_lib_Part2.md)]>> 

[W3schoolå¸®åŠ©æ‰‹å†Œ](https://www.w3school.com.cn/python/numpy_creating_arrays.asp)

## 1. ä»‹ç»

* NumPyæ˜¯Pythonä¸­ç”¨äºç§‘å­¦è®¡ç®—çš„åŸºç¡€è½¯ä»¶åŒ…ï¼Œæä¾›äº†å¤šç§ç”¨äº**æ•°ç»„æ“ä½œ**å’Œ**æ•°å­¦è¿ç®—**çš„åŠŸèƒ½ã€‚NumPyèƒ½å¤Ÿæä¾›ä¸€ä¸ªæ¯”Python`list`å¯¹è±¡å¿«50å€çš„æ•°ç»„å¯¹è±¡`ndarray`ã€‚

* ä¸åˆ—è¡¨ä¸åŒï¼ŒNumPy æ•°ç»„å­˜å‚¨åœ¨å†…å­˜ä¸­çš„<u>ä¸€ä¸ªè¿ç»­ä½ç½®</u>ï¼Œå› æ­¤è¿›ç¨‹å¯ä»¥éå¸¸æœ‰æ•ˆåœ°è®¿é—®å’Œæ“çºµå®ƒä»¬ã€‚

* é€šè¿‡æ§åˆ¶å°çš„ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…æ­¤åŒ…ï¼š

  ```python
  pip install numpy
  ```

* å®‰è£…åé€šè¿‡`import`å…³é”®å­—æ¥å¯¼å…¥ç¨‹åºï¼Œè¿˜å¯ä»¥ç”±`as`å…³é”®å­—æ¥ä¸ºå…¶æŒ‡å®šåˆ«å

  ```python
  import numpy as np
  ```

* è·å–`numpy`ç‰ˆæœ¬

  ```python
  np.__version__
  ```

ä¸‹é¢ä»‹ç»å¸¸ç”¨çš„**NumPy**æ–¹æ³•ï¼š

## 2. æ–¹æ³•

### 2.1 æ•°ç»„

#### 2.1.1 æ•°ç»„åˆ›å»º

* **0~3 dimensional arrary**

  ````python
  def np_array_dims():
      # 0-D
      arr_0d = np.array(63)
      # print('0-D array example/ scalar:', arr_0d)
      
      # 1-D
      arr_1d = np.array([1, 2, 3, 4, 5, 6])
      # print('1-D array example:', arr_1d)
      
      # 2-Dï¼šå…¶å…ƒç´ ä¸ºä¸€ç»´æ•°ç»„
      arr_2d = np.array([[1, 2, 3, 4], [5, 6, 7, 8]])
      # print('2-D array example:', arr_2d)
      
      # 3-Dï¼šå…¶å…ƒç´ ä¸ºäºŒç»´æ•°ç»„
      arr_3d = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])
      # print('3-D array example:', arr_3d)
      
      return arr_0d, arr_1d, arr_2d, arr_3d
  ````

  * **2-D**æ•°ç»„çš„å…ƒç´ ä¸º**1-D**æ•°ç»„ï¼Œè¡¨ç¤ºä¸º`np.array([	[, , , ], [, , , ]	])`ï¼ŒNumPyä¸­æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç†çŸ©é˜µè¿ç®—çš„å­æ¨¡å—==numpy.mat==

  * åŒç†ï¼Œ**3-D**æ•°ç»„çš„å…ƒç´ ä»¥**2-D**æ•°ç»„è¡¨ç¤ºä¸ºï¼š`np.array([  [ [],[] ],   [ [],[] ]   ])`

    <img src="C:\Users\Xueyong Lu\Desktop\å­¦ä¹ \Python\.msc\pics\array_def.png" style="zoom:67%;" />

* æ£€æŸ¥æ•°ç»„ç»´æ•°ï¼š`ndarray.ndim`å±æ€§

  ```python
  def np_array_dims():
      ...
      return arr_0d, arr_1d, arr_2d, arr_3d
  
  # æœªçŸ¥å‚æ•°ä¸ªæ•° *args
  def np_array_ndim(*arrs):
      for arr in arrs:
          if isinstance(arr, np.ndarray): # æˆ–è€…type(arr) == np.ndarray
              print('Dimension of the array:', arr.ndim)
          else:
              return -1
              print('Not expected "np.ndarray" type!')
              
  # ä¸»å‡½æ•°
  if __name__ == '__main__':
      # 2. ndimæ–¹æ³•è·å–æ•°ç»„ç»´æ•°
      # å•ä¸ªèµ‹å€¼
      arr_0d, arr_1d, arr_2d, arr_3d = np_array_dims()
      np_array_ndim(arr_0d, arr_1d, arr_2d, arr_3d)
      # é€šè¿‡*è¿ç®—ç¬¦å°†np_array_dims()è¿”å›çš„å¤šä¸ªæ•°ç»„å˜é‡è¿›è¡Œè§£åŒ…
      np_array_ndim(*np_array_dims())
      
  >> Dimension of the array: 0
  >> Dimension of the array: 1
  >> Dimension of the array: 2
  >> Dimension of the array: 3
  ```

* å¤šç»´æ•°ç»„ `ndmin = const.`

  ```python
  def np_array_multi_dim(dim):
      arr_multi = np.array([1, 2, 3, 4], ndmin=dim)
      return arr_multi
  
  if __name__ == '__main__':
      # 3. åˆ›å»ºå¤šç»´æ•°ç»„
      dim = input('Input the expected dim of array:')
      array_multi = np_array_multi_dim(int(dim))
      print(array_multi)
      print('Dimension:', array_multi.ndim)
      
  >> Input the expected dim of array:5
  >> [[[[[1 2 3 4]]]]]
  >> Dimension: 5
  ```

  *åœ¨æœ¬ä¾‹æ•°ç»„ä¸­ï¼šæœ€é‡Œé¢çš„ç»´åº¦ï¼ˆç¬¬ 5 ä¸ª dimï¼‰æœ‰ 4 ä¸ªå…ƒç´ ï¼Œç¬¬ 4 ä¸ª dim æœ‰ 1 ä¸ªå…ƒç´ ä¸ºå‘é‡ï¼Œç¬¬ 3 ä¸ª dim å…·æœ‰ 1 ä¸ªå…ƒç´ æ˜¯ä¸å‘é‡çš„çŸ©é˜µï¼Œç¬¬ 2 ä¸ª dim æœ‰ 1 ä¸ªå…ƒç´ æ˜¯ 3D æ•°ç»„ï¼Œè€Œç¬¬ 1 ä¸ª dim æœ‰ 1 ä¸ªå…ƒç´ ï¼Œè¯¥å…ƒç´ æ˜¯ 4D æ•°ç»„*

  <img src=".\.msc\pics\array_def_multi.png" style="zoom:50%;" />

* è¡¥å……ï¼š3ç»´ï¼Œå¤šç»´æ•°ç»„çš„åº”ç”¨

  * **å›¾åƒå¤„ç†**ï¼šå›¾åƒå¯ä»¥è¡¨ç¤ºä¸ºä¸‰ç»´æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç»´åº¦è¡¨ç¤ºå›¾åƒçš„é«˜åº¦ï¼Œç¬¬äºŒä¸ªç»´åº¦è¡¨ç¤ºå›¾åƒçš„å®½åº¦ï¼Œç¬¬ä¸‰ä¸ªç»´åº¦è¡¨ç¤ºå›¾åƒçš„é€šé“ï¼ˆä¾‹å¦‚ï¼ŒRGBå›¾åƒå…·æœ‰ä¸‰ä¸ªé€šé“ï¼‰ã€‚
  * **è‡ªç„¶è¯­è¨€å¤„ç†**ï¼šåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œæ–‡æœ¬é€šå¸¸è¡¨ç¤ºä¸ºå¤šç»´æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªç»´åº¦è¡¨ç¤ºä¸åŒçš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ç»´æ•°ç»„æ¥è¡¨ç¤ºæ¯ä¸ªå•è¯çš„åµŒå…¥å‘é‡ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç»´åº¦è¡¨ç¤ºå•è¯çš„æ•°é‡ï¼Œç¬¬äºŒä¸ªç»´åº¦è¡¨ç¤ºå‘é‡ä¸­çš„å…ƒç´ æ•°é‡ï¼Œç¬¬ä¸‰ä¸ªç»´åº¦è¡¨ç¤ºåµŒå…¥å‘é‡çš„æ•°é‡ã€‚
  * **ç§‘å­¦è®¡ç®—**ï¼šåœ¨ç§‘å­¦è®¡ç®—ä¸­ï¼Œå¤šç»´æ•°ç»„ç”¨äºè¡¨ç¤ºæ•°æ®é›†ã€å›¾åƒã€å£°éŸ³ã€è§†é¢‘ç­‰ç­‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ç»´æ•°ç»„è¡¨ç¤ºç©ºé—´ä¸­çš„æ¸©åº¦åˆ†å¸ƒï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç»´åº¦è¡¨ç¤ºxè½´ä¸Šçš„ä½ç½®ï¼Œç¬¬äºŒä¸ªç»´åº¦è¡¨ç¤ºyè½´ä¸Šçš„ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªç»´åº¦è¡¨ç¤ºæ—¶é—´ã€‚
  * **æœºå™¨å­¦ä¹ **ï¼šåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¤šç»´æ•°ç»„ç”¨äºè¡¨ç¤ºæ•°æ®é›†ã€ç‰¹å¾å‘é‡ã€æƒé‡çŸ©é˜µã€æ¿€æ´»å€¼ç­‰ç­‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ç»´æ•°ç»„è¡¨ç¤ºå·ç§¯ç¥ç»ç½‘ç»œä¸­çš„å›¾åƒè¾“å…¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç»´åº¦è¡¨ç¤ºæ‰¹å¤„ç†ä¸­çš„å›¾åƒæ•°é‡ï¼Œç¬¬äºŒä¸ªç»´åº¦è¡¨ç¤ºå›¾åƒçš„é«˜åº¦ï¼Œç¬¬ä¸‰ä¸ªç»´åº¦è¡¨ç¤ºå›¾åƒçš„å®½åº¦ã€‚

#### 2.1.2 æ•°ç»„ç´¢å¼•

NumPy æ•°ç»„ä¸­çš„ç´¢å¼•ä»¥==0==å¼€å¤´ï¼ˆåŒºåˆ«äºMatlabçš„==1==ï¼‰ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸º 0ï¼Œç¬¬äºŒä¸ªå…ƒç´ çš„ç´¢å¼•ä¸º 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚

* **1-Dim array**

  ```python
  arr_1 = np.array([1, 2, 3, 4, 5])
  	# æ ¼å¼åŒ–è¾“å‡ºæ ¼å¼
      print('Summation of 1. and 4. element of a 1-D array: %d + %d = %d' % (arr_1[0], arr_1[3], arr_1[0] + arr_1[3]))
      # f-string
      print(f'Summation: {arr_1[0]} + {arr_1[3]} = {arr_1[0]+arr_1[3]}')
  
  >> Summation of elements of a 1-D array: 1 + 4 = 5
  >> Summation: 1 + 4 = 5
  ```

* **2-D Array**

  ```python
  arr_2 = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]])
  	# æå–äºŒç»´æ•°ç»„ä¸­ç¬¬äºŒç»´çš„ç¬¬ä¸‰ä¸ªå…ƒç´ [1,2] (ç´¢å¼•=ä½ç½®-1ï¼ŒåŒºåˆ«äºMatlab)
      print(f'3nd element on the 2nd dim: {arr_2[1,2]}')
      
  # è¾“å‡ºï¼š
  
  >> 3nd element on the 2nd dim: 8
  ```

* **3-D Array**

  ```python
  arr_3 = np.array([[[1, 2, 3], [4, 5, 6]], 
                    [[7, 8, 9], [10, 11, 12]]])
      print(f'3rd element of 2nd array of 2nd array of the 3-D array: {arr_3[1, 1, 2]}')
      
  # è¾“å‡ºï¼š3-Dæ•°ç»„ -> ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆ2-Dæ•°ç»„ï¼‰ -> ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆ1-Dæ•°ç»„ï¼‰-> ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼ˆ1-Då‘é‡çš„å…ƒç´ ï¼‰
  
  >> 3rd element of 2nd array of 2nd array of the 3-D array: 12
  ```

* **è´Ÿæ•°ç´¢å¼•**

  ```python
  arr_neg = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]])
      print('Last element from 2nd dim: ', arr_neg[1, -1])
      
  # è¾“å‡ºï¼šè¾“å‡ºç¬¬äºŒ(ind = 1)ä¸ªæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ 
  
  >> Last element from 2nd dim:  10
  ```

#### 2.1.3 æ•°ç»„åˆ‡ç‰‡

å¯¹NumPyçš„**.ndarray**å¯¹è±¡è¿›è¡Œåˆ‡ç‰‡æ—¶æœ‰ï¼š**`[startï¼šendï¼šstep]`**ï¼Œé»˜è®¤å€¼åˆ†åˆ«ä¸º**`[0: len(ndarray): 1]`**ã€‚

* **å‘é‡è£åˆ‡**

  * **æ­£å‘åˆ‡ç‰‡**

    ```python
    arr = np.array([1, 2, 3, 4, 5, 6, 7])
    
    # ç®€å•åˆ‡ç‰‡
    arr[1:5] # [2,5] --> [2 3 4 5]
    
    # æŒ‡å®šç»“æŸç´¢å¼•
    arr[:4] # [1,4]
    
    >> [1 2 3 4]
    ```

      *åˆ‡ç‰‡æ“ä½œè¿”å›çš„ç»“æœ**åŒ…æ‹¬å¼€å§‹ç´¢å¼•**ï¼Œä½†**ä¸åŒ…æ‹¬ç»“æŸç´¢å¼• $\Rightarrow$ å®é™…ä½ç½® [start+1, end]**ã€‚*

  * **è´Ÿå‘åˆ‡ç‰‡**

    ```python
    arr = np.array([1, 2, 3, 4, 5, 6, 7])
    # è´Ÿå‘è£åˆ‡
    arr[-3:-1] # ä»æœ«å°¾å¼€å§‹çš„ç´¢å¼• 3 åˆ°æœ«å°¾å¼€å§‹çš„ç´¢å¼• 1
    		   # å®é™…ä½ç½® [-(|start|+1),-(|end|+2)]
        
    >> [4 5]
    ```

  * **æŒ‡å®šæ­¥é•¿**

    ```python
    arr = np.array([1, 2, 3, 4, 5, 6, 7])
    # æŒ‡å®šèµ·å§‹ã€é—´éš”
    arr[1:5:2] # å®é™…ä½ç½®[2,5] --> [2 4]
    
    # æŒ‡å®šé—´éš”
    arr[::2] 
    
    >> [1 3 5 7]
    ```

* **2-Dæ•°ç»„è£åˆ‡**

  å¯¹2ç»´æ•°ç»„è¿›è¡Œåˆ‡ç‰‡æ—¶ï¼Œ**`arr[arg1, arg2]`**å…¶ä¸­**`arg1`**ä¸ºäºŒç»´æ•°ç»„çš„å•ä¸ªå‘é‡ï¼ˆå…ƒç´ ï¼‰çš„ç´¢å¼•ï¼Œ**`arg2`**æ‰æ˜¯å¯¹åº”çš„å‘é‡ä¸­å…ƒç´ çš„ç´¢å¼•

  * **æŸä¸ªå‘é‡çš„ç´¢å¼•å…ƒç´ **

    ```python
    arr = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]])
    # æå–äºŒç»´æ•°ç»„ï¼šç¬¬2ä¸ªå‘é‡çš„ç¬¬2-4ä¸ªå…ƒç´ 
    print(arr[1, 1:4]) 
    
    >> [7 8 9]
    ```

  * **å¤šä¸ªå‘é‡çš„åŒä¸€ç´¢å¼•å…ƒç´ **

    ```python
    arr = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]])
    # æå–ç¬¬1~2ä¸ªå‘é‡çš„ï¼šç¬¬5ä¸ªå…ƒç´ 
    print(arr[0:2, 4]) 
    
    >> [5 10]
    ```

  * **å¤šä¸ªå‘é‡çš„å¤šä¸ªå…ƒç´ **

    ```python
    arr = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]])
    # æå–ç¬¬1~2ä¸ªå‘é‡çš„ï¼šç¬¬3~5ä¸ªå…ƒç´ 
    print(arr[0:2, 2:5]) 
    
    >> [ [3 4 5], [8 9 10] ]
    ```

### 2.2 NumPyæ•°æ®ç±»å‹

åœ¨Pythonä¸­ï¼Œé»˜è®¤æœ‰ä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹ï¼š**strings**, **integer**, **float**, **boolean**, **complex**ã€‚

å¯¹äºNumPyåº“æœ‰å‡ ç±»æ‰©å±•çš„æ•°æ®ç±»å‹ï¼š

| **`i`**  | **`b`**  |    **`u`**     | **`f`**  |   **`c`**    |    **`m`**    |   **`M`**    | **`O`**  |  **`S`**   |   **`U`**   |               **`V`**               |
| :------: | :------: | :------------: | :------: | :----------: | :-----------: | :----------: | :------: | :--------: | :---------: | :---------------------------------: |
| **æ•´æ•°** | **å¸ƒå°”** | **æ— ç¬¦å·æ•´æ•°** | **æµ®ç‚¹** | **å¤åˆæµ®ç‚¹** | **timedelta** | **timedate** | **å¯¹è±¡** | **å­—ç¬¦ä¸²** | **unicode** | **å›ºå®šçš„å…¶ä»–ç±»å‹çš„å†…å­˜å— ( void )** |

NumPyä¸­æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨ä»¥æ£€æŸ¥æ•°ç»„çš„æ•°æ®ç±»å‹ã€æŒ‡å®šæ•°ç»„ç±»å‹ç­‰ã€‚

#### **2.2.1 æ£€æŸ¥æ•°æ®ç±»å‹**

```python
import numpy as np

arr = np.array([1, 2, 3, 4])
print(arr.dtype)

>> int32 
# é»˜è®¤æ•´æ•°æ•°ç»„çš„ç±»å‹ä¸ºï¼šint32
```

#### 2.2.2 æŒ‡å®šåˆ›å»ºæ•°æ®ç±»å‹

```python
import numpy as np

arr = np.array([1, 2, 3, 4], dtype='S') # æŒ‡å®šæ•°ç»„[1, 2, 3, 4]çš„ç±»å‹ä¸ºå­—ç¬¦ä¸²â€œSâ€

print(arr)
print(arr.dtype)
print(arr.dtype == '|S1')

>> [b'1' b'2' b'3' b'4']
>> |S1
>> True
```

#### 2.2.3 æŒ‡å®šç±»å‹å¹¶å®šä¹‰å¤§å°

```python
arr = np.array([1, 2, 3, 4], dtype='i4') # 4å­—èŠ‚æ•´æ•°ç±»å‹
										 # i8 -> int64
print(arr)
print(arr.dtype)
print(len(arr))

>> [1 2 3 4]
>> int32
>> 4
```

* å¦‚æœæ•°æ®ç±»å‹æ— æ³•è¢«å¼ºåˆ¶è½¬æ¢ï¼Œåˆ™ä¼šæŠ›å‡º**`ValueError`**çš„é”™è¯¯

  ```python
  arr = np.array(['a', '2', '3'], dtype='i')
  
  >> ValueError: invalid literal for int() with base 10: 'a'
  ```

#### 2.2.4 è½¬æ¢ç±»å‹

* ç”¨**`astype()`**å‡½æ•°åˆ›å»ºæ•°ç»„çš„==å‰¯æœ¬==ï¼Œå¹¶å…è®¸å°†æ•°æ®ç±»å‹æŒ‡å®šä¸ºå‚æ•°

  ```python
  arr = np.array([1.1, 2.1, 3.9])
  newarr = arr.astype('i')
  # newarr = arr.astype(int)
  
  print(newarr)
  print(newarr.dtype)
  
  >> [1 2 3]
  >> int32
  ```

  * NumPyä¸­ï¼Œè¦å°†`float`ç±»å‹è½¬æ¢ä¸º`int`ç±»å‹ï¼Œç»“æœ==åªä¼šä¿ç•™å…¶æ•´æ•°éƒ¨åˆ†==

* **`astype()`**å¦ä¸€ä¸ªä¾‹å­

  ```python
  arr = np.array([1.1, 2.1, 3.9, 0, -2])
  newarr = arr.astype('bool')
  # newarr = arr.astype(bool)
  
  print(newarr)
  print(newarr.dtype)
  
  >> [ True  True  True False  True]
  >> bool
  ```

### 2.3 æ•°ç»„å‰¯æœ¬å’Œè§†å›¾

|             å‰¯æœ¬             |             è§†å›¾             |
| :--------------------------: | :--------------------------: |
|        æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®        |       ä¸æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®       |
| å‰¯æœ¬çš„æ›´æ”¹==ä¸å½±å“==åŸå§‹æ•°ç»„ | è§†å›¾çš„æ›´æ”¹==ä¼šå½±å“==åŸå§‹æ•°ç»„ |
| åŸå§‹æ•°ç»„çš„æ›´æ”¹==ä¸å½±å“==å‰¯æœ¬ | åŸå§‹æ•°ç»„çš„æ›´æ”¹==ä¼šå½±å“==è§†å›¾ |

#### 2.3.1 å‰¯æœ¬

åˆ›å»ºå‰¯æœ¬ä¸º**`array.copy()`**å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¸ä¾èµ–NumPyåº“ã€‚åœ¨è¿›è¡Œå¤åˆ¶ä¹‹åçš„å‰¯æœ¬å’ŒåŸå§‹çš„æ•°ç»„çš„æ”¹å˜éƒ½==ä¸ä¼š==ç›¸äº’å½±å“ã€‚

```python
arr = np.array([1, 2, 3, 4, 5])
x = arr.copy()
arr[0] = 61

print(arr) 
print(x)

>> arr = [1 2 3 4 5]
>> x = [61 2 3 4 5]
```

#### 2.3.2 è§†å›¾

æ•°ç»„è§†å›¾ä¸º**`array.view()`**ï¼Œæ­¤å‡½æ•°ä¸ºNumPyç‹¬æœ‰çš„æ–¹æ³•ã€‚

```python
arr = np.array([1, 2, 3, 4, 5])
x = arr.view()
arr[0] = 61
# x[0] = 61

print(arr)
print(x)

>> [61 2 3 4 5]
>> [61 2 3 4 5]
```

* æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æ•°æ®ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºå‰¯æœ¬è¿˜æ˜¯è§†å›¾**`ndarray.base`**ï¼Œåªæœ‰NumPyçš„æ•°ç»„å¯¹è±¡æ‰å…·æœ‰`.base`çš„æ–¹æ³•

```python
arr = np.array([1, 2, 3, 4, 5])

x = arr.copy()
y = arr.view()

print(x.base)
print(y.base)

>> None 		# å‰¯æœ¬ -> æœ‰æ•°æ® -> è¿”å›None
>> [1 2 3 4 5]  # è§†å›¾ -> æ— æ•°æ® -> è¿”å›åŸå§‹æ•°ç»„
```

### 2.4 æ•°ç»„çš„å½¢çŠ¶å’Œé‡å¡‘

#### 2.4.1 æ•°ç»„çš„å½¢çŠ¶`.shape`

* è·å–æ•°ç»„çš„å„ä¸ªç»´åº¦

  ```python
  arr = np.array([[1, 2, 3, 4], [5, 6, 7, 8]])
  
  print(arr.shape)
  print(arr.ndim)
  
  >> (2, 4)
  >> 2
  # ndarray.shapeå±æ€§è¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œè¯¥å…ƒç»„åˆ†åˆ«ä¸ºæ•°ç»„çš„ç»´åº¦ -> arræœ‰ä¸¤ä¸ªç»´åº¦ï¼Œæ¯ä¸ªç»´åº¦æœ‰4ä¸ªå…ƒç´ 
  ```

* åˆ›å»ºå¤šç»´æ•°ç»„ï¼Œå¹¶éªŒè¯å„ä¸ªç»´åº¦

  ```python
  arr = np.array([1, 2, 3, 4], ndmin=5)
  
  print(arr)
  print('shape of array :', arr.shape)
  
  >> [[[[[1 2 3 4]]]]]
  >> (1, 1, 1, 1, 4) # 5ä¸ªç»´åº¦åˆ†åˆ«å…·æœ‰çš„å…ƒç´ ä¸ªæ•°ï¼š1 1 1 1 4
  >> 5
  ```

#### 2.4.2 æ•°ç»„é‡å¡‘`.reshape`

* **1-Dåˆ°2-D**

  ```python
  arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])
  newarr = arr.reshape(4, 3)
  
  print(newarr)
  
  >> [[ 1  2  3]
     [ 4  5  6]
     [ 7  8  9]
     [10 11 12]]
  ```

* **1-Dåˆ°3-D**

  ```python
  arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])
  newarr = arr.reshape(2, 3, 2)
  
  print(newarr)
  
  >> [ [ [ 1  2]
         [ 3  4]
         [ 5  6] ]
  
       [ [ 7  8]
         [ 9 10]
         [11 12] ] ]
  # æœ€å¤–é¢çš„ç»´åº¦å…·æœ‰ 2 ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„åˆåŒ…å« 3 ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„åŒ…å« 2 ä¸ªå…ƒç´ 
  ```

  * æ•°ç»„é‡å¡‘æ–¹æ³•éœ€è¦åŸæ¥çš„æ•°ç»„å…ƒç´ ä¸ªæ•°ä¸é‡å¡‘åçš„å¤šç»´æ•°ç»„å…ƒç´ ä¸ªæ•°ç›¸ç­‰ï¼Œå¦åˆ™å°†ä¼šäº§ç”Ÿé”™è¯¯

* **æŒ‡å®šä¸€ä¸ªæœªçŸ¥ç»´åº¦**

  ```python
  arr = np.array([1, 2, 3, 4, 5, 6, 7, 8])
  newarr = arr.reshape(2, 2, -1)
  
  print(newarr)
  
  >> [ [ [1 2]
         [3 4] ]
  
       [ [5 6]
         [7 8] ] ]
  # æœ€å¤–å±‚æœ‰2ä¸ªç»´åº¦ï¼Œä¸¤ä¸ªç»´åº¦å„è‡ªéƒ½æœ‰ä¸¤ä¸ªå‘é‡ï¼Œæ¯ä¸ªå‘é‡çš„å…ƒç´ æœªæŒ‡å®š
  ```

* **å±•å¹³æ•°ç»„**

  ```python
  arr = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])
  newarr = arr.reshape(-1)
  
  print(newarr)
  
  >> [ 1  2  3  4  5  6  7  8  9 10 11 12]
  ```

#### 2.4.3 NumPyæ•°ç»„é«˜çº§æ“ä½œ

* **`rot90`**: `rot90(arr, k=1, axes=(0, 1))`: å°†æ•°ç»„`arr`é€†æ—¶é’ˆæ—‹è½¬90åº¦ï¼Œ`k`è¡¨ç¤ºæ—‹è½¬æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1ï¼Œå³æ—‹è½¬90åº¦ï¼›`axes`è¡¨ç¤ºé€‰æ‹©å“ªäº›è½´è¿›è¡Œæ—‹è½¬ï¼Œé»˜è®¤ä¸ºæ—‹è½¬å‰ä¸¤ä¸ªè½´ï¼Œå³è¡¨ç¤ºçŸ©é˜µçš„è¡Œå’Œåˆ—ã€‚

  ```python
  arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
  # å°†æ•°ç»„é€†æ—¶é’ˆæ—‹è½¬90åº¦
  arr_rotated = np.rot90(arr)
  
  print("rotated array:\n", arr_rotated)
  
  >> [[3 6 9]
      [2 5 8]
      [1 4 7]]
  # åŸå§‹æ•°ç»„
  # [[1 2 3]
  #  [4 5 6]
  #  [7 8 9]]
  ```

* **`flip`**: `flip(arr, axis=None)`: æ²¿ç€æŒ‡å®šè½´ç¿»è½¬æ•°ç»„ï¼Œ`axis`è¡¨ç¤ºè¦ç¿»è½¬çš„è½´ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–ä¸€ä¸ªå…ƒç»„ã€‚å¦‚æœ`axis`ä¸ºNoneï¼Œåˆ™å°†æ•°ç»„æ²¿ç€æ‰€æœ‰è½´ç¿»è½¬ã€‚

  ```python
  arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
  # æ²¿ç€ç¬¬äºŒä¸ªè½´ç¿»è½¬æ•°ç»„,å‚ç›´æ–¹å‘ç¬¬2ä¸ªè½´
  arr_flipped_axis = np.flip(arr, axis=1)
  print("flipped axis array:\n", arr_flipped_axis)
  
  >>  [ [3 2 1]
   	  [6 5 4]
  	  [9 8 7] ]
  # åŸå§‹æ•°ç»„
  # [ [1 2 3]
  #   [4 5 6]
  #   [7 8 9] ]
  ```

* **`flipud(arr)`**: æ²¿ç€å‚ç›´æ–¹å‘ç¿»è½¬æ•°ç»„ã€‚

  ```python
  arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
  # æ²¿ç€å‚ç›´æ–¹å‘ç¿»è½¬æ•°ç»„
  arr_flipped_ud = np.flipud(arr)
  print("flipped ud array:\n", arr_flipped_ud)
  
  >> [ [7 8 9]
     	 [4 5 6]
       [1 2 3] ]
  # åŸå§‹æ•°ç»„
  # [ [1 2 3]
  #   [4 5 6]
  #   [7 8 9] ]
  ```

* **`fliplr(arr)`**: æ²¿ç€æ°´å¹³æ–¹å‘ç¿»è½¬æ•°ç»„ã€‚

  ```python
  arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
  # æ²¿ç€æ°´å¹³æ–¹å‘ç¿»è½¬æ•°ç»„ï¼Œç¿»è½¬è½´ä¸ºå‚ç›´
  arr_flipped_lr = np.fliplr(arr)
  print("flipped lr array:\n", arr_flipped_lr)
  
  >> [ [3 2 1]
       [6 5 4]
       [9 8 7] ]
  # åŸå§‹æ•°ç»„
  # [ [1 2 3]
  #   [4 5 6]
  #   [7 8 9] ]
  ```

### 2.5 æ•°ç»„è¿­ä»£

#### 2.5.1 `for`å¾ªç¯

* å¯¹äºä¸€ç»´æ•°ç»„çš„è¿­ä»£ï¼Œ`for`å¾ªç¯éå†çš„æ˜¯æ ‡é‡
* å¯¹äºäºŒç»´æ•°ç»„çš„è¿­ä»£ï¼Œä¸€ä¸ª`for`å¾ªç¯éå†çš„æ˜¯æ¯è¡Œå‘é‡ï¼ˆå¯¹åº”çš„ä¸€ç»´æ•°ç»„ï¼‰ï¼Œè¦æƒ³éå†åˆ°æ ‡é‡åˆ™éœ€è¦ä¸¤ä¸ª`for`å¾ªç¯
* å¯¹äºä¸‰ä½æ•°ç»„çš„è¿­ä»£ï¼Œä¸€ä¸ª`for`å¾ªç¯éå†æ¯ä¸ª**2-D**æ•°ç»„ï¼Œä¸¤ä¸ª`for`å¾ªç¯éå†åˆ°å•ä¸ª**1-D**æ•°ç»„ï¼ˆï¼‰å‘é‡ï¼Œéå†åˆ°æ ‡é‡åˆ™éœ€è¦3ä¸ª`for`å¾ªç¯

#### 2.5.2 `nditer()`è¿­ä»£

* éå†ä¸€ä¸ª**3-D**æ•°ç»„

  ```python
  arr = np.array([[[1, 2], [3, 4]], [[5, 6], [7, 8]]])
  
  for x in np.nditer(arr): # ä½¿ç”¨ä¸€ä¸ª`for`å¾ªç¯ + np.nditer(ndarray)æ–¹æ³•è¿›è¡Œå…¨éƒ¨æ ‡é‡çš„è¿­ä»£
    print(x)
  
  >> 1
  >> 2
  >> 3
  >> 4
  >> 5
  >> 6
  >> 7
  >> 8
  ```

* **è¿­ä»£ä¸åŒæ•°æ®ç±»å‹çš„æ•°ç»„**

  * ä½¿ç”¨ `op_dtypes` å‚æ•°ï¼Œå¹¶ä¼ é€’æœŸæœ›çš„æ•°æ®ç±»å‹ï¼Œä»¥åœ¨è¿­ä»£æ—¶æ›´æ”¹å…ƒç´ çš„æ•°æ®ç±»å‹

  * NumPy ==ä¸ä¼šå°±åœ°æ›´æ”¹å…ƒç´ çš„æ•°æ®ç±»å‹ï¼ˆå…ƒç´ ä½äºæ•°ç»„ä¸­ï¼‰==ï¼Œå› æ­¤å®ƒéœ€è¦ä¸€äº›å…¶ä»–ç©ºé—´æ¥æ‰§è¡Œæ­¤æ“ä½œï¼Œè¯¥é¢å¤–ç©ºé—´ç§°ä¸º bufferï¼Œä¸ºäº†åœ¨ `nditer()` ä¸­å¯ç”¨å®ƒï¼Œæˆ‘ä»¬ä¼ å‚ `flags=['buffered']`

    ```python
    arr = np.array([1, 2, 3])
    
    for x in np.nditer(arr, flags=['buffered'], op_dtypes=['S']): # ä»¥å­—ç¬¦çš„ç±»å‹éå†æ•°ç»„
      print(x)
    
    >> b'1'
    >> b'2'
    >> b'3'
    ```

* **ä»¥ä¸åŒæ­¥é•¿è¿›è¡Œè¿­ä»£**ï¼ˆè¿‡æ»¤è¿­ä»£ï¼‰

  ```python
  arr = np.array([[1, 2, 3, 4], [5, 6, 7, 8]]) 
  
  for x in np.nditer(arr[:, ::2]): # æ¯éå† 2D æ•°ç»„çš„ä¸€ä¸ªæ ‡é‡å…ƒç´ ï¼Œè·³è¿‡ 1 ä¸ªå…ƒç´ 
    print(x)
  
  >> 1
  >> 3
  >> 5
  >> 7
  ```

  <img src=".\.msc\pics\nditer_var_step.png" style="zoom: 67%;" />

* **`ndenumerate() `æšä¸¾è¿­ä»£**

  * **1-Dæ•°ç»„æšä¸¾**

    ```python
    arr = np.array([1, 2, 3])
    
    for idx, x in np.ndenumerate(arr):
      print(idx, x)
    
    >> (0,) 1
    >> (1,) 2
    >> (2,) 3
    ```

  * **2-Dæ•°ç»„æšä¸¾**

    ```pytho
    arr = np.array([[1, 2, 3, 4], [5, 6, 7, 8]])
    
    for idx, x in np.ndenumerate(arr):
      print(idx, x)
    
    >> (0, 0) 1
    >> (0, 1) 2
    >> (0, 2) 3
    >> (0, 3) 4
    >> (1, 0) 5
    >> (1, 1) 6
    >> (1, 2) 7
    >> (1, 3) 8
    ```

    * æ³¨æ„<i class = "fa fa-exclamation" aria-hidden="true"></i> ï¼š
      * æšä¸¾æ–¹æ³•æ‰“å°çš„ç´¢å¼•æ˜¯ä»¥å…ƒç»„çš„å½¢å¼å‚¨å­˜çš„
      * å¦‚æœä¸éå†ç´¢å¼•`idx`ï¼Œé‚£ä¹ˆè¾“å‡ºçš„æ˜¯ä¸€æ•´ä¸ªå…ƒç»„ï¼Œå³**`((idx1, idx2), element)`**çš„å½¢å¼ï¼ˆå¯¹äºäºŒç»´æ•°ç»„ï¼‰



ğŸ“˜<<[Day 01](.\Python_Day01_Reg_Ex.md) | [Day 03](.\Python_Day03_Numpy_lib_Part2.md)]>> 

